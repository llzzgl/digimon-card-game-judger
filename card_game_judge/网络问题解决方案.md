# 网络连接问题解决方案

## 问题说明

你遇到的错误是因为无法连接到 Google 的 API 服务器（`142.250.66.74:443`）。这在中国大陆很常见，因为 Google 服务需要特殊的网络环境。

## 推荐解决方案

### 方案 1：使用 OpenAI API（推荐）✅

OpenAI 的服务在国内可以正常访问，我已经创建了优化版本：

```bash
python run_translation.py
# 选择选项 1 (OpenAI)
```

**优点：**
- 在国内网络环境下稳定可用
- 翻译质量优秀
- 使用 `gpt-4o-mini` 模型，性价比高

**配置：**
在 `.env` 文件中设置：
```
OPENAI_API_KEY=你的OpenAI密钥
```

**成本估算：**
- gpt-4o-mini: $0.15/1M input tokens, $0.60/1M output tokens
- 翻译一本规则书大约 $0.50-$1.00

---

### 方案 2：使用国内 API 中转服务

如果你想使用更便宜的方案，可以使用国内的 OpenAI API 中转服务：

**步骤：**
1. 注册国内 API 服务（如：api2d.com, openai-sb.com 等）
2. 获取 API Key 和 Base URL
3. 在 `.env` 中配置：

```
OPENAI_API_KEY=你的中转服务密钥
OPENAI_BASE_URL=https://中转服务地址/v1
```

4. 运行翻译工具即可

---

### 方案 3：配置代理使用 Gemini

如果你有可用的代理，可以配置环境变量：

**Windows CMD:**
```cmd
set HTTP_PROXY=http://127.0.0.1:7890
set HTTPS_PROXY=http://127.0.0.1:7890
python run_translation.py
```

**Windows PowerShell:**
```powershell
$env:HTTP_PROXY="http://127.0.0.1:7890"
$env:HTTPS_PROXY="http://127.0.0.1:7890"
python run_translation.py
```

注意：将 `7890` 替换为你的代理端口。

---

## 快速开始（推荐流程）

### 1. 检查 OpenAI API Key

编辑 `.env` 文件：
```
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
```

### 2. 运行翻译

```bash
cd card_game_judge
python run_translation.py
```

### 3. 选择 OpenAI 引擎

在菜单中选择选项 `1`

### 4. 等待完成

翻译大约需要 5-10 分钟，完成后会生成：
```
数码宝贝卡牌对战_综合规则_最新版_中文翻译.txt
```

---

## 获取 OpenAI API Key

### 官方渠道
1. 访问 https://platform.openai.com/
2. 注册账号（需要国际信用卡）
3. 创建 API Key

### 国内中转服务（更方便）
1. **API2D** - https://api2d.com/
2. **OpenAI-SB** - https://openai-sb.com/
3. **CloseAI** - https://console.closeai-asia.com/

这些服务支持：
- 支付宝/微信支付
- 无需国际信用卡
- 价格略高但更方便
- 提供相同的 API 接口

---

## 文件说明

我已经创建了新的优化版本：
- `translate_rulebook_openai.py` - 优化的 OpenAI 版本
- 使用 `gpt-4o-mini` 模型（性价比高）
- 支持自定义 API 端点（中转服务）
- 更好的错误处理

---

## 常见问题

**Q: OpenAI API 贵吗？**
A: 使用 gpt-4o-mini 模型，翻译一本规则书大约 $0.50-$1.00，很实惠。

**Q: 可以使用免费的 API 吗？**
A: OpenAI 新用户有 $5 免费额度，足够翻译多次。

**Q: 中转服务安全吗？**
A: 选择知名的中转服务，不要在 API 请求中包含敏感信息即可。

**Q: 翻译质量如何？**
A: OpenAI 的翻译质量很好，特别是对专业术语的处理。建议翻译后人工审核关键部分。

---

## 立即开始

```bash
# 1. 确保 .env 中有 OPENAI_API_KEY
# 2. 运行翻译工具
python run_translation.py

# 3. 选择选项 1 (OpenAI)
# 4. 等待完成
```

就这么简单！
